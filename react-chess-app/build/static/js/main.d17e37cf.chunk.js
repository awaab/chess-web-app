(this["webpackJsonpchess-app"]=this["webpackJsonpchess-app"]||[]).push([[0],{17:function(e,t,a){},32:function(e,t,a){e.exports=a(61)},58:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},59:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(27),s=a.n(o),r=(a(17),a(6)),c=a(7),i=a(10),u=a(8),m=a(9),h=a(28),p=a.n(h),d=a(14),g=a.n(d),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).makeMove=function(e,t,n){a.props.chessGame.move({from:e,to:t}),a.props.updateBoardCallback(a.props.chessGame.fen(),e+t)},a.displayOnConsole=function(){console.log(a.props.chessGame.ascii()),console.log(a.state),console.log(a.props.chessGame.turn())},a.onDrop=function(e){var t=e.sourceSquare,n=e.targetSquare,l=e.piece;a.makeMove(t,n,l)},a.onMessage=function(e){console.log(JSON.parse(e))},a.allowDrag=function(e){var t=e.piece,n=(e.sourceSquare,t.charAt(0));return n===a.props.chessGame.turn()&&(n==a.props.playerColor||void 0)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(p.a,{position:this.props.position,onDrop:this.onDrop,allowDrag:this.allowDrag}))}}]),t}(n.Component),f=a(5),w=a.n(f),v=a(62),y=a(65),b=a(63),k=a(30),C=a(66),O="hello/",S="login/",_="signup/",G="user/",j="session/";w.a.defaults.xsrfCookieName="csrftoken",w.a.defaults.xsrfHeaderName="X-CSRFTOKEN";var N=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={token:"",SessionKey:"",logged_in:!1},a.submit=function(e){e.preventDefault();var t={username:e.target.username.value,password:e.target.password.value};console.log(t),console.log(e.target.username.value),w.a.post(S,t).then((function(e){a.setState({token:e.data.key}),console.log(e),a.getSessionKey(),a.setState({logged_in:!0}),a.props.setLoggedInCallback(!0)}),(function(e){console.log(e)}))},a.submit_signup=function(e){e.preventDefault();var t={username:e.target.username.value,password1:e.target.password1.value,password2:e.target.password2.value};w.a.post(_,t).then((function(e){console.log(e),a.setState({logged_in:!0}),a.props.setLoggedInCallback(!0)}),(function(e){console.log(e)}))},a.getSessionKey=function(){w.a.get(j).then((function(e){console.log(e.data),a.setState({SessionKey:e.data.SessionKey}),console.log("SessionKey from login",e.data.SessionKey),a.props.setSessionKeyCallback(e.data.SessionKey)}))},a.sessionClick=function(e){console.log("YAAA"),w.a.get(j).then((function(e){console.log(e.data)}))},a.helloClick=function(e){console.log("YAAA"),w.a.get(O).then((function(e){console.log(e.data),w.a.get(G,{headers:{Aothorization:"Bearer"+a.state.token}}).then((function(e){console.log(e)}))}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"text-center"},l.a.createElement("h2",null,"Play Chess!"),l.a.createElement(v.a,{className:"text-center",style:{width:"50%"}},l.a.createElement(y.a,{onSubmit:this.submit},l.a.createElement(y.a.Group,{as:b.a,controlId:"username"},l.a.createElement(y.a.Control,{type:"text",placeholder:"User Name"})),l.a.createElement(y.a.Group,{as:b.a,controlId:"password"},l.a.createElement(y.a.Control,{type:"password",placeholder:"Password"})),l.a.createElement(y.a.Group,{as:b.a,controlId:"submitLogin"},l.a.createElement(k.a,{style:{width:"10%"}}),l.a.createElement(k.a,null,l.a.createElement(C.a,{variant:"primary",type:"submit",className:"text-center",style:{width:"250px"}},"Login")),l.a.createElement(k.a,{style:{width:"10%"}})))),l.a.createElement(v.a,{className:"text-center",style:{width:"50%"}},l.a.createElement(y.a,{onSubmit:this.submit_signup},l.a.createElement(y.a.Group,{as:b.a,controlId:"username"},l.a.createElement(y.a.Control,{type:"text",placeholder:"User name"})),l.a.createElement(y.a.Group,{as:b.a,controlId:"password1"},l.a.createElement(y.a.Control,{type:"password",placeholder:"Password"})),l.a.createElement(y.a.Group,{as:b.a,controlId:"password2"},l.a.createElement(y.a.Control,{type:"password",placeholder:"Repeat password"})),l.a.createElement(y.a.Group,{as:b.a,controlId:"submitSignup"},l.a.createElement(k.a,{style:{width:"10%"}}),l.a.createElement(k.a,null,l.a.createElement(C.a,{variant:"primary",type:"submit",className:"btn btn-primary",style:{backgroundColor:"#B9732F",width:"250px"}},"Signup")),l.a.createElement(k.a,{style:{width:"10%"}})))))}}]),t}(n.Component),x=a(31),D=a(13);w.a.defaults.xsrfCookieName="csrftoken",w.a.defaults.xsrfHeaderName="X-CSRFTOKEN";var K="endgame/",I=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={position:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",moves:[],gameOver:!1},a.depth={1:1,2:3,3:5,4:7,5:9,6:10},a.nextTurn=function(e){console.log("In chessgame turn: ",e),console.log("++++++++++++++++++++"),e===a.props.playerColor?console.log("Your turn"):(console.log("Oponents turn"),a.playOponentsTurn())},a.addMove=function(e){console.log("addMove()"),console.log(e),console.log(a.chessGame.turn()),a.setState((function(t,a){return{moves:[].concat(Object(x.a)(t.moves),[e])}})),console.log(a.state.moves)},a.updateBoard=function(e,t){a.addMove(t),a.setState((function(t,a){return{position:e}})),a.displayOnConsole(),a.chessGame.game_over()&&a.endGame(),a.nextTurn(a.chessGame.turn())},a.endGame=function(){a.setState({gameOver:!0});var e="b"===a.chessGame.turn()?"W":"B",t="w"===a.props.playerColor?"user":"level"+a.props.level,n="b"===a.props.playerColor?"user":"level"+a.props.level,l=(new Date).getTime()/1e3-a.start_timestamp/1e3;console.log("duration",l);var o={winner:e,white_player:t,black_player:n,duration:l};console.log("GAM ENDED"),console.log(a.chessGame.turn()),w.a.post(K,o).then((function(e){console.log(e)}),(function(e){console.log(e)}))},a.displayOnConsole=function(){console.log(a.chessGame.ascii()),console.log(a.state),console.log(a.chessGame.turn())},a.makeMove=function(e){console.log("MAKEMOVE"),console.log(a.chessGame.ascii()),console.log(e);var t=e.substr(0,2),n=e.substr(2,4);a.chessGame.move({from:t,to:n}),console.log(a.chessGame.ascii()),a.updateBoard(a.chessGame.fen(),e)},a.playOponentsTurn=function(){console.log("playOponentsTurn",a.chessGame.turn()),a.stockfish.postMessage("position fen "+a.state.position);var e=a.depth[a.props.level];console.log("go depth "+e),a.stockfish.postMessage("go depth "+e)},a.stockfish=new Worker("static/stockfish.js"),a.chessGame=new g.a;var n=new Date;a.start_timestamp=n.getTime();var l=Object(D.a)(a);return a.stockfish.onmessage=function(e){if(e.data.startsWith("bestmove")){console.log(e.data);var t=e.data.split(" ")[1];l.makeMove(t)}else console.log("NOT event.data.startsWith('bestmove')");"uciok"==e.data&&console.log("UUCCII OOKK")},a.stockfish.postMessage("uci"),a.nextTurn("w"),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v.a,null,l.a.createElement(b.a,{className:"text-center"},l.a.createElement(k.a,null),l.a.createElement(k.a,null,!this.state.gameOver&&l.a.createElement("h3",null,"Playing against AI level ",this.props.level," "),this.state.gameOver&&l.a.createElement("h2",null,"Game Over")),l.a.createElement(k.a,null)),l.a.createElement(b.a,{className:"text-center"},l.a.createElement(k.a,null),l.a.createElement(k.a,null,l.a.createElement(E,{chessGame:this.chessGame,position:this.state.position,nextTurnCallback:this.nextTurn,updateBoardCallback:this.updateBoard,moveDoneCallback:this.moveDone,playerColor:this.props.playerColor})),l.a.createElement(k.a,null)),l.a.createElement(b.a,null,l.a.createElement("h3",null)),l.a.createElement(b.a,{className:"text-center"},l.a.createElement(k.a,null),l.a.createElement(k.a,null,l.a.createElement(C.a,{onClick:this.props.showHome,style:{width:"40%"}},"Quit game")),l.a.createElement(k.a,null))))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={show_options:!0,show_game:!1,color:"w",level:1},a.handleSubmit=function(e){e.preventDefault(),a.setState({show_options:!1,show_game:!0})},a.handleLevelChange=function(e){a.setState({level:e.target.value})},a.handleColorChange=function(e){a.setState({color:e.target.value})},a.endGame=function(){a.props.endGameCallback()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,this.state.show_options&&l.a.createElement("div",{className:"centered",style:{width:"50%"}},l.a.createElement("h3",null,"Game Options"),l.a.createElement(v.a,null,l.a.createElement(y.a,{onSubmit:this.handleSubmit},l.a.createElement(y.a.Group,{controlId:"difficulty.level"},l.a.createElement(y.a.Label,null,"Select difficulty level"),l.a.createElement(y.a.Control,{as:"select",value:this.state.level,onChange:this.handleLevelChange},l.a.createElement("option",{value:1},"One"),l.a.createElement("option",{value:2},"Two"),l.a.createElement("option",{value:3},"Three"),l.a.createElement("option",{value:4},"Four"),l.a.createElement("option",{value:5},"Five"),l.a.createElement("option",{value:6},"Six"))),l.a.createElement("p",null),l.a.createElement(y.a.Label,{as:"Row"},"Select color"),l.a.createElement(y.a.Check,{type:"radio",value:"w",checked:"w"===this.state.color,onChange:this.handleColorChange,id:"white",label:"White"}),l.a.createElement(y.a.Check,{type:"radio",value:"b",checked:"b"===this.state.color,onChange:this.handleColorChange,id:"black",label:"Black"}),l.a.createElement(y.a.Group,{as:b.a,controlId:"Play",className:"text-center"},l.a.createElement(k.a,{style:{width:"10%"}}),l.a.createElement(k.a,null,l.a.createElement(C.a,{variant:"primary",type:"submit",style:{width:"140px"},className:"btn btn-primary"},"Play now")),l.a.createElement(k.a,{style:{width:"10%"}}))))),this.state.show_game&&l.a.createElement(n.Fragment,null,l.a.createElement(I,{showHome:this.props.showHome,playerColor:this.state.color,level:this.state.level,endGameCallback:this.endGame})))}}]),t}(n.Component),L=a(64);w.a.defaults.xsrfCookieName="csrftoken",w.a.defaults.xsrfHeaderName="X-CSRFTOKEN";var M="games_played/",B=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={gameList:[],won:-1,lost:-1,draw:-1,played:-1,user:""},a.setStats=function(e){a.setState({gameList:e.games_list,won:e.won,lost:e.lost,draw:e.draw,played:e.played,user:e.user}),console.log(a.state)},a.resultString=function(e){return"D"===e.winner?"DRAW":"W"===e.winner?e.white_player===a.state.user?"WON":"LOST":"B"===e.winner?e.black_player===a.state.user?"WON":"LOST":void 0},w.a.get(M).then((function(e){console.log(e.data),a.setStats(e.data)})),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(v.a,null,l.a.createElement(b.a,null,l.a.createElement("h2",null)),l.a.createElement(b.a,null,l.a.createElement(k.a,{style:{width:"25%"}}),l.a.createElement(k.a,null,l.a.createElement("h4",null,"Total games played: ",this.state.played)),l.a.createElement(k.a,{style:{width:"25%"}})),l.a.createElement(b.a,null,l.a.createElement(k.a,{style:{width:"35%"}}),l.a.createElement(k.a,null,l.a.createElement("p",null,"Won: ",this.state.won)," "),l.a.createElement(k.a,null,l.a.createElement("p",null,"Lost: ",this.state.lost)," "),l.a.createElement(k.a,null,l.a.createElement("p",null,"Draw: ",this.state.draw)," "),l.a.createElement(k.a,{style:{width:"35%"}}))),l.a.createElement(v.a,null,l.a.createElement(L.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Result"),l.a.createElement("th",null,"White"),l.a.createElement("th",null),l.a.createElement("th",null,"Black"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Duration"))),l.a.createElement("tbody",null,this.state.gameList.map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",null,e.resultString(t)),l.a.createElement("td",null,t.white_player," "),l.a.createElement("td",null,"vs "),l.a.createElement("td",null," ",t.black_player),l.a.createElement("td",null,t.started_at," "),l.a.createElement("td",null,t.duration," "))})))),l.a.createElement(b.a,null,l.a.createElement(k.a,null),l.a.createElement(k.a,null,l.a.createElement(C.a,{onClick:this.props.showHome,style:{width:"80%"}},"Back to main menu")),l.a.createElement(k.a,null))))}}]),t}(n.Component),P="logout/",A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={show_home:!0,show_stats:!1,show_options:!1},a.logOut=function(){w.a.post(P).then((function(e){console.log(e),a.props.setLoggedInCallback(!1)}))},a.showStats=function(){console.log("showStats"),a.setState({show_home:!1,show_stats:!0,show_options:!1})},a.showHome=function(){console.log("showStats"),a.setState({show_home:!0,show_stats:!1,show_options:!1})},a.showOptions=function(){a.setState({show_home:!1,show_stats:!1,show_options:!0})},a.endGame=function(){a.showHome()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v.a,null,this.state.show_home&&l.a.createElement("div",{className:"centered"},l.a.createElement(v.a,null,l.a.createElement("h2",{style:{width:"40%",textAlign:"center"}},"Home ")),l.a.createElement(v.a,null,l.a.createElement(C.a,{onClick:this.showStats,style:{width:"40%"}},"Show Stats")),l.a.createElement("p",null),l.a.createElement(v.a,null,l.a.createElement(C.a,{onClick:this.showOptions,style:{width:"40%"}},"Play against AI")),l.a.createElement("p",null),l.a.createElement(v.a,null,l.a.createElement(C.a,{disabled:!0,style:{width:"40%"}},"Play against online players")),l.a.createElement("p",null),l.a.createElement(v.a,null,l.a.createElement(C.a,{onClick:this.logOut,style:{width:"40%"}},"Logout"))),this.state.show_stats&&l.a.createElement(B,{showHome:this.showHome}),this.state.show_options&&l.a.createElement(n.Fragment,null,l.a.createElement(T,{showHome:this.showHome,endGameCallback:this.endGame}))))}}]),t}(n.Component);a(58),a(59),a(60);w.a.defaults.xsrfCookieName="csrftoken",w.a.defaults.xsrfHeaderName="X-CSRFTOKEN";var H=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={message_to_send:"Message No. 0",messages_recieved:[],token:"",logged_in:!1,SessionKey:"DefaultAppjs"},a.handleData=function(e){JSON.parse(e);console.log(e)},a.setLoggedIn=function(e){a.setState({logged_in:e})},a.setSessionKey=function(e){a.setState({SessionKey:e}),console.log(a.state),console.log("SessionKey from appjs",e)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("componentDidMount token=",this.state.token),w.a.get("logged-in/").then((function(t){console.log(t),e.setState({logged_in:!0})}))}},{key:"render",value:function(){return l.a.createElement("div",null,!this.state.logged_in&&l.a.createElement(N,{setTokenCallback:this.setToken,setLoggedInCallback:this.setLoggedIn,setSessionKeyCallback:this.setSessionKey}),this.state.logged_in&&l.a.createElement(A,{setLoggedInCallback:this.setLoggedIn}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.d17e37cf.chunk.js.map